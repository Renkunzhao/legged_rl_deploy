# lowlevel controller
llc_config_file:
  src/unitree_lowlevel/config/g1.yaml

ll_dt: 0.005

# Training repo: mjlab
policy:
  backend: ort
  model_path: src/legged_rl_deploy/policies/g1/velocity/mjlab/policy.onnx
  input_dim: 96
  output_dim: 29
  # src/mjlab/tasks/velocity/config/g1/env_cfgs.py
  policy_dt: 0.02
  # G1 joint order already matches lowlevel joint order (identity map).
  joint_ids_map: [
    0, 1, 2, 3, 4, 5,
    6, 7, 8, 9, 10, 11,
    12, 13, 14,
    15, 16, 17, 18, 19, 20, 21,
    22, 23, 24, 25, 26, 27, 28
  ]
  # G1_ARTICULATION in src/mjlab/src/mjlab/asset_zoo/robots/unitree_g1/g1_constants.py
  stiffness: [
    40.17923863450712, 99.09842777666111, 40.17923863450712, 99.09842777666111, 28.50124619574858, 28.50124619574858,
    40.17923863450712, 99.09842777666111, 40.17923863450712, 99.09842777666111, 28.50124619574858, 28.50124619574858,
    40.17923863450712, 28.50124619574858, 28.50124619574858,
    14.25062309787429, 14.25062309787429, 14.25062309787429, 14.25062309787429, 14.25062309787429, 16.77832748089279, 16.77832748089279,
    14.25062309787429, 14.25062309787429, 14.25062309787429, 14.25062309787429, 14.25062309787429, 16.77832748089279, 16.77832748089279
  ]
  damping: [
    2.557889775413375, 6.308801853496639, 2.557889775413375, 6.308801853496639, 1.814445686584846, 1.814445686584846,
    2.557889775413375, 6.308801853496639, 2.557889775413375, 6.308801853496639, 1.814445686584846, 1.814445686584846,
    2.557889775413375, 1.814445686584846, 1.814445686584846,
    0.907222843292423, 0.907222843292423, 0.907222843292423, 0.907222843292423, 0.907222843292423, 1.06814150219, 1.06814150219,
    0.907222843292423, 0.907222843292423, 0.907222843292423, 0.907222843292423, 0.907222843292423, 1.06814150219, 1.06814150219
  ]
  commands:
    base_velocity:
      process_order: [clip]
      min: [-1.0, -1.0, -0.5]
      max: [1.0, 1.0, 0.5]
  actions:
    JointPositionAction:
      process_order: [scale, offset]
      # G1_ACTION_SCALE in src/mjlab/src/mjlab/asset_zoo/robots/unitree_g1/g1_constants.py
      scale: [
        0.5475464629911068, 0.35066146637882434, 0.5475464629911068, 0.35066146637882434, 0.43857731392336724, 0.43857731392336724,
        0.5475464629911068, 0.35066146637882434, 0.5475464629911068, 0.35066146637882434, 0.43857731392336724, 0.43857731392336724,
        0.5475464629911068, 0.43857731392336724, 0.43857731392336724,
        0.43857731392336724, 0.43857731392336724, 0.43857731392336724, 0.43857731392336724, 0.43857731392336724, 0.07450087032950714, 0.07450087032950714,
        0.43857731392336724, 0.43857731392336724, 0.43857731392336724, 0.43857731392336724, 0.43857731392336724, 0.07450087032950714, 0.07450087032950714
      ]
      # KNEES_BENT_KEYFRAME in src/mjlab/src/mjlab/asset_zoo/robots/unitree_g1/g1_constants.py
      offset: [
        -0.312, 0.0, 0.0, 0.669, -0.363, 0.0,
        -0.312, 0.0, 0.0, 0.669, -0.363, 0.0,
        0.0, 0.0, 0.0,
        0.2, 0.2, 0.0, 0.6, 0.0, 0.0, 0.0,
        0.2, -0.2, 0.0, 0.6, 0.0, 0.0, 0.0
      ]
  observations:
    stack:
      length: 1
      order: oldest_first
    terms:
      base_ang_vel_B:
      projected_gravity:
      joint_pos:
        process_order: [offset]
        # Subtract default joint positions to get relative positions.
        offset: [
          0.312, 0.0, 0.0, -0.669, 0.363, 0.0,
          0.312, 0.0, 0.0, -0.669, 0.363, 0.0,
          0.0, 0.0, 0.0,
          -0.2, -0.2, 0.0, -0.6, 0.0, 0.0, 0.0,
          -0.2, 0.2, 0.0, -0.6, 0.0, 0.0, 0.0
        ]
      joint_vel:
      last_action:
      velocity_commands:
