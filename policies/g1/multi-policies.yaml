# ============================================================
# G1 Multi-Policy Master Config
# ============================================================
# This file manages multiple RL policies with gamepad-triggered
# transitions.  Each sub-config is a standard policy config.yaml
# that also works standalone (backward compatible).
#
# Transition trigger format:
#   "button"       — on_press of that button
#   "L2+button"    — L2 held + on_press of button
#
# Available buttons:
#   A B X Y  up down left right  L1 R1 R2  start  F1 F2
# ============================================================

# lowlevel controller (shared across all policies)
llc_config_file: src/unitree_lowlevel/config/g1.yaml

# override lowlevel dt if needed
ll_dt: 0.005

# clip final torque (shared)
clip_final_tau: true

# FSM definition
fsm:
  # The policy to activate when entering HighController state
  default: velocity

  policies:
    # ---- velocity (walking / balancing) ----
    velocity:
      config: src/legged_rl_deploy/policies/g1/velocity/unitree_rl_mjlab/config.yaml
      transitions:
        mimic_dance: R1 + A

    # ---- mimic dance ----
    mimic_dance:
      config: src/legged_rl_deploy/policies/g1/mimic/unitree_rl_mjlab/config.yaml
      transitions:
        velocity: R2 + A
